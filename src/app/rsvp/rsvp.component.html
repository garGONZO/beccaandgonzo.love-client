<div id="container" class="pad-footer">


	<div *ngIf="rsvp" id="rsvp" class="font">
		<form *ngIf="!rsvpFound" [formGroup]="rsvpForm" (submit)="rsvpFormSubmit()">
			<div id="rsvp-intro">
				Enter the RSVP code you received in your invitation.
			</div>
			<div class="form-group">
				<label class="center-block">
					<input id="rsvp-code-input" formControlName="code">
				</label>
				<button type="submit" class="btn btn-success">Search</button>
				<div id="invalid-rsvp-code" *ngIf="invalidRsvpCode">
					Invalid RSVP code.
				</div>
			</div>
		</form>

		<div *ngIf="rsvpFound">
			The following guests are assigned the RSVP code: {{rsvpForm.get('code').value}}
			<form [formGroup]="guestForm" (submit)="guestFormSubmit()">
				<div *ngFor="let person of persons">
					<div class="personContainer">
						<div class="personName">
							<div *ngIf="!person.plusOne; else plusOne">
								{{person.firstName}} {{person.lastName}}
							</div>
							<ng-template #plusOne>
								Guest
								<div *ngIf="this.guestForm.get('attending'+person.personToken).value === 'true'">
									<div>
										<label for="firstName{{person.personToken}}">First Name</label>
										<input id="firstName{{person.personToken}}"
										       formControlName="firstName{{person.personToken}}">
									</div>
									<div>
										<label for="lastName{{person.personToken}}">Last Name</label>
										<input id="lastName{{person.personToken}}"
										       formControlName="lastName{{person.personToken}}">
									</div>
								</div>
							</ng-template>
						</div>
						<div>
							Attending
							<div class="radio-question form-group flex">
								<div class="radio-option">
									<input type="radio" id="attendingYes{{person.personToken}}"
									       name="attending{{person.personToken}}" value="true"
									       formControlName="attending{{person.personToken}}">
									<label for="attendingYes{{person.personToken}}">Let's party!</label>
								</div>
								<div class="radio-option">
									<input type="radio" id="attendingNo{{person.personToken}}"
									       name="attending{{person.personToken}}" value="false"
									       formControlName="attending{{person.personToken}}">
									<label for="attendingNo{{person.personToken}}">I'm missing out :(</label>
								</div>
							</div>
						</div>
						<div class="dinner-question"
						     [ngClass]="{'mobile-dinner-question': !flex, 'non-mobile-dinner-question': flex}"
						     *ngIf="this.guestForm.get('attending'+person.personToken).value === 'true'">
							Dinner Option
							<div *ngIf="flex; else mobile" class="radio-question form-group" [ngClass]="{'flex': flex}">
								<div class="radio-option">
									<ng-container *ngTemplateOutlet="fish"></ng-container>
								</div>
								<div class="radio-option">
									<ng-container *ngTemplateOutlet="steak"></ng-container>
								</div>
								<div class="radio-option">
									<ng-container *ngTemplateOutlet="veg"></ng-container>
								</div>
								<div class="radio-option">
									<ng-container *ngTemplateOutlet="child"></ng-container>
								</div>
							</div>
							<ng-template #mobile>
								<table class="radio-question form-group" [ngClass]="{'flex': flex}">
									<tr class="radio-option">
										<ng-container *ngTemplateOutlet="fish"></ng-container>
									</tr>
									<tr class="radio-option">
										<ng-container *ngTemplateOutlet="steak"></ng-container>
									</tr>
									<tr class="radio-option">
										<ng-container *ngTemplateOutlet="veg"></ng-container>
									</tr>
									<tr class="radio-option">
										<ng-container *ngTemplateOutlet="child"></ng-container>
									</tr>
								</table>
							</ng-template>

							<ng-template #fish>
								<input type="radio" id="dinnerOptionFish{{person.personToken}}"
								       name="dinnerOption{{person.personToken}}" value="FISH"
								       formControlName="dinnerOption{{person.personToken}}">
								<label for="dinnerOptionFish{{person.personToken}}">Herb Crusted Yellow Fin
									Tuna</label>
							</ng-template>

							<ng-template #steak>
								<input type="radio" id="dinnerOptionSteak{{person.personToken}}"
								       name="dinnerOption{{person.personToken}}" value="STEAK"
								       formControlName="dinnerOption{{person.personToken}}">
								<label for="dinnerOptionSteak{{person.personToken}}">Grilled Skirt Steak</label>
							</ng-template>

							<ng-template #veg>
								<input type="radio" id="dinnerOptionVeg{{person.personToken}}"
								       name="dinnerOption{{person.personToken}}" value="VEG"
								       formControlName="dinnerOption{{person.personToken}}">
								<label for="dinnerOptionVeg{{person.personToken}}">Mushroom Risotto</label>
							</ng-template>

							<ng-template #child>
								<input type="radio" id="dinnerOptionChild{{person.personToken}}"
								       name="dinnerOption{{person.personToken}}" value="CHILD"
								       formControlName="dinnerOption{{person.personToken}}">
								<label for="dinnerOptionChild{{person.personToken}}">Children's Plate</label>
							</ng-template>

						</div>
					</div>
				</div>
				<div *ngIf="justSaved">
					Your RSVP has been saved.
				</div>
				<div *ngIf="validationError" id="validation-error">
					<ng-container *ngFor="let errorMessage of validationErrorMessages">
						<div>
							{{errorMessage}}
						</div>
					</ng-container>
				</div>
				<div class="center">
					<button type="submit" class="btn btn-success">Save</button>
				</div>
			</form>

		</div>
	</div>

	<div id="playlist-intro" class="font center">
		Do you have a song that will get you up and dancing? Add it to our playlist and we will pass it along to the DJ.
	</div>

	<app-playlist></app-playlist>
</div>





